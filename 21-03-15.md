# 학습 목록

- [42서울] Cub3D - 스프라이트 구현
- [C] open 함수
- [C] perror 함수

<br><br>

# 학습 내용

## [42서울] Cub3D - 스프라이트 구현

<img width="1192" alt="스프라이트구현" src="https://user-images.githubusercontent.com/64737872/111164061-069cb080-85e1-11eb-9aa8-7fc3b590e759.png">

### 스프라이트 구현 과정

스프라이트 구현할 때 굉장히 많이 고생했다. 중간에 번아웃도 오면서 내 42서울은 여기까지인가 라고 생각할 때 쯤, 코드를 전체적으로 수정하면서 내가 실수한 부분을 많이 찾아냈다.

### 실수한 부분

- 벽의 텍스쳐 사이즈와 몬스터 텍스쳐 사이즈가 서로 다르다. 이 부분을 신경쓰지 않아 많이 해맸다.
- 코드 작성 전에 x좌표와 y좌표를 통일하고 작성했어야 했는데, 통일되지 않은 부분이 존재했다.

### 더 구현해야 할 부분

- 스프라이트 근처에서 이동할 때 스프라이트가 이상하게 따라다니는 현상이 보인다.

<br><br>

## [C] open 함수

    파일을 열 때 사용하는 함수

### open 함수

```c
#include <fcntl.h>

int open(const char *FILENAME, int FLAGS[, mode_t MODE]);
```

**매개변수**

- FILENAME: 대상 파일 이름
- FLAGS: 파일에 대한 옵션
- MODE: FLAGS에서 O_CREAT 옵션을 사용할 때, 파일이 생성될 때 지정되는 파일 접근 권한

**반환값**

- 0 이상: 파일 열기에 성공하면 파일 디스크립터의 양의 정수 값을 반환한다.
- -1: 실패

**FLAGS 옵션**

- O_RDONLY: 읽기 전용으로 열기
- O_WRONLY: 쓰기 전용으로 열기
- O_RDWR: 읽기와 쓰기 모두 가능하게 열기
- O_CREAT: 해당 파일이 없으면 생성한다. 또한 MODE를 통해 접근 권한을 추가해야 한다.

    open("file.c", O_RDONLY | O_CREAT, 0666);

- O_EXCL: O_CREAT를 사용할 때, 파일이 이미 있어도 열기가 가능하며 쓰기를 하면 이전 내용이 사라진다. 그러나 O_EXCL을 함께 사용하면, 이미 파일이 있을 때 open 되지 않아 존재하던 파일을 보존할 수 있습니다.

    open("file.c", O_RDONLY | O_CREAT | O_EXCL, 0666);

- O_TRUNC: 기존의 파일 내용을 모두 삭제한다.
- O_APPEND: 파일을 추가해 쓰기가 되도록 open 후에 쓰기 포인터가 파일의 끝에 위치한다.
- O_NOCITTY: 열기 대상이 터미널인 경우, 이 터미널이 프로그램의 제어 터미널로 할당하지 않는다.
- O_NONBLOCK: 읽을 내용이 없을 때엔 읽을 내용이 있을 때까지 기다리지 않고 바로 복귀한다.
- O_SYNC: 쓰기를 할 때, 실제 쓰기가 완료될 때까지 기다린다.

<br><br>

## [C] perror 함수

<img width="341" alt="perror" src="https://user-images.githubusercontent.com/64737872/111164116-161bf980-85e1-11eb-8c7a-09bfaa418d21.png">

    오류 메시지를 출력한다. 전역변수 errno의 값을 해석하여 이에 해당하는 시스템 오류 메시지를 **표준 오류 출력 스트림 (stderr)**에 출력한다. 또한 추가적으로 전달하고자 하는 사용자 정의 메시지를 str 인자에 담아 출력할 수도 있다.

```c
#include <stdio.h>

void perror(const char *str);
```

**매개변수**

- str: 시스템 오류 메시지 이전에 출력할 사용자 정의 메시지이다.

**반환값**

없다

**errno**

- 정수형 변수로 이전의 라이브러리 함수에 의해 발생한 오류에 대한 정보를 가지고 있다. 이 때, errno 의 값에 따라 perror 함수에 의해 출력되는 시스템 오류 메시지는 플랫폼이나 컴파일러에 따라 달라질 수가 있다.

<br><br>
