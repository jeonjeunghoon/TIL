# 학습 목록

- Bitmap image

<br><br>

# 학습 내용

## Bitmap image

    비트맵 그림 파일에 대한 공부를 한다.

### 비트맵 파일 포맷

- 바이너리 형식이다.
- 확장자는 `.bmp` 나 `.dib` 를 갖는다.
- 비트맵 파일은 jpeg나 png 파일과 달리 보통 압축을 하지 않는다. 그래서 파일의 손상이 적다. (또한 jpeg나 png는 비트맵 파일이라 하지 않는다.)
- 위와 같은 이유로 비트맵 이미지는 굉장히 큰 크기를 갖고 있다.
- bmp는 리틀엔디안 방식을 따른다.
- 비트맵 파일은 픽셀 하나를 몇 비트로 저장하느냐에 따라 구조가 달라진다.

### 비트맵 파일의 구조

- 비트맵 파일 헤더(14바이트): 비트맵 파일 식별정보, 파일 크기, 데이터 위치
- 비트맵 정보 헤더(=DIB, 40바이트): 가로 크기, 세로 크기, 해상도, 픽셀의 비트 수 등 그림의 자세한 정보
- 픽셀 데이터(가변): 그림 파일의 실제 색상 정보

### 비트맵 파일 헤더의 멤버

- file type(2바이트): BMP파일 매직 넘버. 비트맵 파일이 맞는지 확인하는데 사용하며 ASCII 코드로 0x42(B), 0x4D(M)가 저장된다.
- file size(4바이트): 파일 크기(바이트)
- reserved1(2바이트): 미래를 위해 예약된 공간
- reserved2(2바이트): 미래를 위해 예약된 공간2
- pixel data offset(4바이트): 비트맵 데이터의 시작 위치

### 비트맵 정보 헤더(DIB)의 멤버

- header size(4바이트): 현재 비트맵 정보 헤더(DIB)의 크기
- image width(4바이트): 비트맵 이미지의 가로 크기(픽셀)
- image height(4바이트): 비트맵 이미지의 세로 크기(픽셀)
    - 양수: 이미지의 상하가 뒤집혀서 저장된 상태
    - 음수: 이미지가 그대로 저장된 상태
    - 보통 세로 크기는 양수로 저장되어 있다.
- planes(2바이트): 사용하는 색상판의 수. 항상 1이다.
- bit per pixel(2바이트): 픽셀 하나를 표현하는 비트 수
- compression(4바이트): 압축 방식. 보통 비트맵은 압축을 하지 않으므로 0이다.
- image size(4바이트): 비트맵 이미지의 픽셀 데이터 크기(압축 되지 않은 크기)
- x pixels per meter(4바이트): 그림의 가로 해상도(미터당 픽셀)
- y pixels per meter(4바이트): 그림의 세로 해상도(미터당 픽셀)
- total colors(4바이트): 색상 테이블에서 실제 사용되는 색상 수
- important colors(4바이트): 비트맵을 표현하기 위해 필요한 색상 인덱스 수

24비트 비트맵은 픽셀을 Blue, Green, Red 순서로 저장하며 각 색상의 크기는 1바이트이다. 따라서 픽셀당 3바이트를 사용한다.

### 비트맵 구조체 작성할 때 유의할 점

반드시 구조체를 1바이트 크기로 정렬해야 한다. 비트맵 파일에서 각 정보는 위치와 크기가 정확하게 정해져 있으므로 반드시 구조체의 크기와 형태 그대로 읽어야 한다.

<br><br>
